<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>A Demonstration Model | Urban Transportation Planning</title>
  <meta name="description" content="These are notes and assignments related to the Urban Transportation Planning class at BYU." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="A Demonstration Model | Urban Transportation Planning" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These are notes and assignments related to the Urban Transportation Planning class at BYU." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A Demonstration Model | Urban Transportation Planning" />
  
  <meta name="twitter:description" content="These are notes and assignments related to the Urban Transportation Planning class at BYU." />
  

<meta name="author" content="Gregory Macfarlane, PhD, PE" />


<meta name="date" content="2021-10-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chap-process.html"/>
<link rel="next" href="app-rstudio.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Urban Transportation Planning</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Foreword</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="chap-blocks.html"><a href="chap-blocks.html"><i class="fa fa-check"></i><b>1</b> Building Blocks</a>
<ul>
<li class="chapter" data-level="1.1" data-path="chap-blocks.html"><a href="chap-blocks.html#planning-for-human-systems"><i class="fa fa-check"></i><b>1.1</b> Planning for Human Systems</a></li>
<li class="chapter" data-level="1.2" data-path="chap-blocks.html"><a href="chap-blocks.html#the-four-step-transportation-planning-process"><i class="fa fa-check"></i><b>1.2</b> The Four-Step Transportation Planning Process</a></li>
<li class="chapter" data-level="1.3" data-path="chap-blocks.html"><a href="chap-blocks.html#travel-model-building-blocks"><i class="fa fa-check"></i><b>1.3</b> Travel Model Building Blocks</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="chap-blocks.html"><a href="chap-blocks.html#travel-analysis-zones-and-se-data"><i class="fa fa-check"></i><b>1.3.1</b> Travel Analysis Zones and SE Data</a></li>
<li class="chapter" data-level="1.3.2" data-path="chap-blocks.html"><a href="chap-blocks.html#transportation-networks"><i class="fa fa-check"></i><b>1.3.2</b> Transportation Networks</a></li>
<li class="chapter" data-level="1.3.3" data-path="chap-blocks.html"><a href="chap-blocks.html#matrices"><i class="fa fa-check"></i><b>1.3.3</b> Matrices</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="chap-blocks.html"><a href="chap-blocks.html#data-inputs"><i class="fa fa-check"></i><b>1.4</b> Data Inputs</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="chap-blocks.html"><a href="chap-blocks.html#household-travel-surveys"><i class="fa fa-check"></i><b>1.4.1</b> Household Travel Surveys</a></li>
<li class="chapter" data-level="1.4.2" data-path="chap-blocks.html"><a href="chap-blocks.html#us-census-bureau"><i class="fa fa-check"></i><b>1.4.2</b> US Census Bureau</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="chap-blocks.html"><a href="chap-blocks.html#statistical-and-mathematical-techniques"><i class="fa fa-check"></i><b>1.5</b> Statistical and Mathematical Techniques</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="chap-blocks.html"><a href="chap-blocks.html#continuous-and-discrete-distributions"><i class="fa fa-check"></i><b>1.5.1</b> Continuous and Discrete Distributions</a></li>
<li class="chapter" data-level="1.5.2" data-path="chap-blocks.html"><a href="chap-blocks.html#ipf"><i class="fa fa-check"></i><b>1.5.2</b> Iterative Proportional Fitting</a></li>
<li class="chapter" data-level="1.5.3" data-path="chap-blocks.html"><a href="chap-blocks.html#regression-analysis"><i class="fa fa-check"></i><b>1.5.3</b> Regression Analysis</a></li>
<li class="chapter" data-level="1.5.4" data-path="chap-blocks.html"><a href="chap-blocks.html#numerical-optimization"><i class="fa fa-check"></i><b>1.5.4</b> Numerical Optimization</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chap-blocks.html"><a href="chap-blocks.html#hw-blocks"><i class="fa fa-check"></i>Homework</a></li>
<li class="chapter" data-level="" data-path="chap-blocks.html"><a href="chap-blocks.html#lab-blocks"><i class="fa fa-check"></i>Lab</a>
<ul>
<li class="chapter" data-level="" data-path="chap-blocks.html"><a href="chap-blocks.html#marginal-distributions"><i class="fa fa-check"></i>Marginal Distributions</a></li>
<li class="chapter" data-level="" data-path="chap-blocks.html"><a href="chap-blocks.html#joint-distribution"><i class="fa fa-check"></i>Joint Distribution</a></li>
<li class="chapter" data-level="" data-path="chap-blocks.html"><a href="chap-blocks.html#report"><i class="fa fa-check"></i>Report</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chap-tripgen.html"><a href="chap-tripgen.html"><i class="fa fa-check"></i><b>2</b> Trip Generation</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chap-tripgen.html"><a href="chap-tripgen.html#trip-production"><i class="fa fa-check"></i><b>2.1</b> Trip Production</a></li>
<li class="chapter" data-level="2.2" data-path="chap-tripgen.html"><a href="chap-tripgen.html#trip-attraction"><i class="fa fa-check"></i><b>2.2</b> Trip Attraction</a></li>
<li class="chapter" data-level="" data-path="chap-tripgen.html"><a href="chap-tripgen.html#hw-generation"><i class="fa fa-check"></i>Homework</a></li>
<li class="chapter" data-level="" data-path="chap-tripgen.html"><a href="chap-tripgen.html#lab-generation"><i class="fa fa-check"></i>Lab</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="chap-tripgen.html"><a href="chap-tripgen.html#trip-production-1"><i class="fa fa-check"></i><b>2.2.1</b> Trip Production</a></li>
<li class="chapter" data-level="2.2.2" data-path="chap-tripgen.html"><a href="chap-tripgen.html#trip-attraction-1"><i class="fa fa-check"></i><b>2.2.2</b> Trip Attraction</a></li>
<li class="chapter" data-level="2.2.3" data-path="chap-tripgen.html"><a href="chap-tripgen.html#report-1"><i class="fa fa-check"></i><b>2.2.3</b> Report</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chap-distribution.html"><a href="chap-distribution.html"><i class="fa fa-check"></i><b>3</b> Trip Distribution</a>
<ul>
<li class="chapter" data-level="" data-path="chap-distribution.html"><a href="chap-distribution.html#hw-distribution"><i class="fa fa-check"></i>Homework</a>
<ul>
<li class="chapter" data-level="" data-path="chap-distribution.html"><a href="chap-distribution.html#first-problem-gravity-model-development"><i class="fa fa-check"></i>First Problem: Gravity Model Development</a></li>
<li class="chapter" data-level="" data-path="chap-distribution.html"><a href="chap-distribution.html#second-problem-model-calibration"><i class="fa fa-check"></i>Second Problem: Model Calibration</a></li>
<li class="chapter" data-level="" data-path="chap-distribution.html"><a href="chap-distribution.html#third-problem-model-application"><i class="fa fa-check"></i>Third Problem: Model Application</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chap-modechoice.html"><a href="chap-modechoice.html"><i class="fa fa-check"></i><b>4</b> Mode and Destination Choice</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chap-modechoice.html"><a href="chap-modechoice.html#mathematical-derivation"><i class="fa fa-check"></i><b>4.1</b> Mathematical Derivation</a></li>
<li class="chapter" data-level="4.2" data-path="chap-modechoice.html"><a href="chap-modechoice.html#utility-equations"><i class="fa fa-check"></i><b>4.2</b> Utility Equations</a></li>
<li class="chapter" data-level="4.3" data-path="chap-modechoice.html"><a href="chap-modechoice.html#mnl-estimation"><i class="fa fa-check"></i><b>4.3</b> MNL Estimation</a></li>
<li class="chapter" data-level="4.4" data-path="chap-modechoice.html"><a href="chap-modechoice.html#iia-and-nested-logit"><i class="fa fa-check"></i><b>4.4</b> IIA and Nested Logit</a></li>
<li class="chapter" data-level="4.5" data-path="chap-modechoice.html"><a href="chap-modechoice.html#accessibility-and-log-sums"><i class="fa fa-check"></i><b>4.5</b> Accessibility and Log Sums</a></li>
<li class="chapter" data-level="4.6" data-path="chap-modechoice.html"><a href="chap-modechoice.html#destination-choice"><i class="fa fa-check"></i><b>4.6</b> Destination Choice</a></li>
<li class="chapter" data-level="" data-path="chap-modechoice.html"><a href="chap-modechoice.html#hw-modechoice"><i class="fa fa-check"></i>Homework</a>
<ul>
<li class="chapter" data-level="" data-path="chap-modechoice.html"><a href="chap-modechoice.html#first-problem-set-multinomial-logit-model-estimation"><i class="fa fa-check"></i>First Problem Set: Multinomial Logit Model Estimation</a></li>
<li class="chapter" data-level="" data-path="chap-modechoice.html"><a href="chap-modechoice.html#second-problem-set-nested-logit-models"><i class="fa fa-check"></i>Second Problem Set: Nested Logit Models</a></li>
<li class="chapter" data-level="" data-path="chap-modechoice.html"><a href="chap-modechoice.html#third-problem-set-log-sums-and-destination-choice"><i class="fa fa-check"></i>Third Problem Set: Log Sums and Destination Choice</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chap-modechoice.html"><a href="chap-modechoice.html#lab"><i class="fa fa-check"></i>Lab</a>
<ul>
<li class="chapter" data-level="" data-path="chap-modechoice.html"><a href="chap-modechoice.html#mode-choice-calibration"><i class="fa fa-check"></i>Mode Choice Calibration</a></li>
<li class="chapter" data-level="" data-path="chap-modechoice.html"><a href="chap-modechoice.html#destination-choice-calibration"><i class="fa fa-check"></i>Destination Choice Calibration</a></li>
<li class="chapter" data-level="" data-path="chap-modechoice.html"><a href="chap-modechoice.html#report-2"><i class="fa fa-check"></i>Report</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chap-assignment.html"><a href="chap-assignment.html"><i class="fa fa-check"></i><b>5</b> Network Assignment and Validation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chap-assignment.html"><a href="chap-assignment.html#volume---delay-functions"><i class="fa fa-check"></i><b>5.1</b> Volume - Delay Functions</a></li>
<li class="chapter" data-level="5.2" data-path="chap-assignment.html"><a href="chap-assignment.html#assignment-algorithms"><i class="fa fa-check"></i><b>5.2</b> Assignment Algorithms</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="chap-assignment.html"><a href="chap-assignment.html#all-or-nothing"><i class="fa fa-check"></i><b>5.2.1</b> All-or-Nothing</a></li>
<li class="chapter" data-level="5.2.2" data-path="chap-assignment.html"><a href="chap-assignment.html#incremental-assignment"><i class="fa fa-check"></i><b>5.2.2</b> Incremental Assignment</a></li>
<li class="chapter" data-level="5.2.3" data-path="chap-assignment.html"><a href="chap-assignment.html#successive-averages-fhwa-assignment"><i class="fa fa-check"></i><b>5.2.3</b> Successive Averages (FHWA) Assignment</a></li>
<li class="chapter" data-level="5.2.4" data-path="chap-assignment.html"><a href="chap-assignment.html#frank-wolfe"><i class="fa fa-check"></i><b>5.2.4</b> Frank-Wolfe</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chap-assignment.html"><a href="chap-assignment.html#hw-assignment"><i class="fa fa-check"></i>Homework</a></li>
<li class="chapter" data-level="" data-path="chap-assignment.html"><a href="chap-assignment.html#laboratory-assignment"><i class="fa fa-check"></i>Laboratory Assignment</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chap-process.html"><a href="chap-process.html"><i class="fa fa-check"></i><b>6</b> The Planning Process</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="app-demomodel.html"><a href="app-demomodel.html"><i class="fa fa-check"></i><b>A</b> Demonstration Model</a>
<ul>
<li class="chapter" data-level="A.1" data-path="app-demomodel.html"><a href="app-demomodel.html#running-the-model"><i class="fa fa-check"></i><b>A.1</b> Running the Model</a></li>
<li class="chapter" data-level="A.2" data-path="app-demomodel.html"><a href="app-demomodel.html#files-and-reports"><i class="fa fa-check"></i><b>A.2</b> Files and Reports</a></li>
<li class="chapter" data-level="A.3" data-path="app-demomodel.html"><a href="app-demomodel.html#writing-custom-scripts"><i class="fa fa-check"></i><b>A.3</b> Writing Custom Scripts</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="app-demomodel.html"><a href="app-demomodel.html#network-bandwidth"><i class="fa fa-check"></i><b>A.3.1</b> Network Bandwidth</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="app-demomodel.html"><a href="app-demomodel.html#network-and-zone-maps"><i class="fa fa-check"></i><b>A.4</b> Network and Zone Maps</a>
<ul>
<li class="chapter" data-level="A.4.1" data-path="app-demomodel.html"><a href="app-demomodel.html#shortest-paths"><i class="fa fa-check"></i><b>A.4.1</b> Shortest Paths</a></li>
<li class="chapter" data-level="A.4.2" data-path="app-demomodel.html"><a href="app-demomodel.html#mode-choice-logsum-maps"><i class="fa fa-check"></i><b>A.4.2</b> Mode Choice Logsum Maps</a></li>
</ul></li>
<li class="chapter" data-level="A.5" data-path="app-demomodel.html"><a href="app-demomodel.html#editing-transit-lines"><i class="fa fa-check"></i><b>A.5</b> Editing Transit Lines</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="app-rstudio.html"><a href="app-rstudio.html"><i class="fa fa-check"></i><b>B</b> R and RStudio Help</a>
<ul>
<li class="chapter" data-level="B.1" data-path="app-rstudio.html"><a href="app-rstudio.html#installing"><i class="fa fa-check"></i><b>B.1</b> Installing</a></li>
<li class="chapter" data-level="B.2" data-path="app-rstudio.html"><a href="app-rstudio.html#rstudio-orientation"><i class="fa fa-check"></i><b>B.2</b> RStudio Orientation</a></li>
<li class="chapter" data-level="B.3" data-path="app-rstudio.html"><a href="app-rstudio.html#r-packages"><i class="fa fa-check"></i><b>B.3</b> R Packages</a></li>
<li class="chapter" data-level="B.4" data-path="app-rstudio.html"><a href="app-rstudio.html#working-with-tables"><i class="fa fa-check"></i><b>B.4</b> Working with Tables</a>
<ul>
<li class="chapter" data-level="B.4.1" data-path="app-rstudio.html"><a href="app-rstudio.html#reading-data"><i class="fa fa-check"></i><b>B.4.1</b> Reading Data</a></li>
<li class="chapter" data-level="B.4.2" data-path="app-rstudio.html"><a href="app-rstudio.html#modifying-and-summarizing-tables"><i class="fa fa-check"></i><b>B.4.2</b> Modifying and Summarizing Tables</a></li>
<li class="chapter" data-level="B.4.3" data-path="app-rstudio.html"><a href="app-rstudio.html#app-mutate"><i class="fa fa-check"></i><b>B.4.3</b> Mutate, Summarize, and Group</a></li>
</ul></li>
<li class="chapter" data-level="B.5" data-path="app-rstudio.html"><a href="app-rstudio.html#graphics-with-ggplot2"><i class="fa fa-check"></i><b>B.5</b> Graphics with <code>ggplot2</code></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Urban Transportation Planning</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="app-demomodel" class="section level1" number="7">
<h1><span class="header-section-number">A</span> Demonstration Model</h1>
<p>In this class we will use the model for the Roanoke Valley Transportation
Planning Organization (RVTPO), the MPO responsible for transportation planning
in Roanoke, Virginia. The model is written for the CUBE travel modeling software
package, the same software used by the Wasatch Front Regional Council model. The
model code and files are available on
<a href="https://byu.box.com/s/34xeaghgt8lpbcraosb7cbt8umddh96x">Box</a>.</p>
<p>A few key parameters files have been reset to default values, rather than the
calibrated values used in the actual model. The homework assignments and lab
activities in this course will walk you through re-calibrating the model to use
in your term assignments.</p>
<div id="running-the-model" class="section level2" number="7.1">
<h2><span class="header-section-number">A.1</span> Running the Model</h2>
<p>The model files are available from <a href="https://byu.box.com/s/34xeaghgt8lpbcraosb7cbt8umddh96x">Box</a>
as a compressed file called <code>rvtpo_bare.zip</code>. Extract this file to a folder on
your local computer. I prefer to keep my models in a
folder on the <code>C:\</code> drive called <code>C:\projects</code>. It may be that the C drive is
not available to you, but you should place the model at a path that makes sense
and that will not change from session to session. It is possible that the <code>J:</code>
drive will not have enough space for multiple runs of the model.</p>
<blockquote>
<p>The path that you choose <strong>must have no spaces</strong>, from the drive letter to the
final folder, i.e., <code>C:\folder\folder\rvtpo_bare</code>. If there are any spaces your
model will crash.</p>
</blockquote>
<div class="figure"><span style="display:block;" id="fig:rvtpo-dir"></span>
<img src="images/00_home_folder.png" alt="RVTPO model home folder" width="419" />
<p class="caption">
Figure A.1: RVTPO model home folder
</p>
</div>
<p>Double-click on the <code>roanoke.cat</code> Cube catalog file. This will open
the model application interface in Cube. On this interface you can see the steps
the model will execute, as well as access the input / output files for each
step. Some steps actually contain several sub-steps, and double-clicking the
yellow step box will expand that application.</p>
<div class="figure"><span style="display:block;" id="fig:app-interface"></span>
<img src="images/00_cube_home.png" alt="RVTPO model application interface" width="846" />
<p class="caption">
Figure A.2: RVTPO model application interface
</p>
</div>
<p>Run the base scenario of the model by pushing the large blue “Run”
button in the upper left-hand corner of the Cube application. A window
will appear first asking you to confirm which scenario you are running, and then
showing you the progress. This model takes approximately 15 minutes to run on my
laptop.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a> Complete instructions are included in the model user’s guide (in the
<code>usersguide/</code> folder).</p>
<p>I have also made a YouTube video showing these steps. Note that the video
shows you getting the model from Canvas; get it from <a href="https://byu.box.com/s/34xeaghgt8lpbcraosb7cbt8umddh96x">Box</a>.</p>
<iframe src="https://www.youtube.com/embed/88HAaQLVpJk" width="672" height="400px" data-external="1">
</iframe>
</div>
<div id="files-and-reports" class="section level2" number="7.2">
<h2><span class="header-section-number">A.2</span> Files and Reports</h2>
<p>You can access files in the model in multiple ways:</p>
<ul>
<li>Through the application manager in Cube (input / output boxes)</li>
<li>In the catalog windows on the side</li>
<li>Directly in the File Explorer</li>
</ul>
<iframe src="https://www.youtube.com/embed/Npw-jf19wak" width="672" height="400px" data-external="1">
</iframe>
<p>The model has a few prepared reports that you can run at any time. These are
found in the “Reports” drop-down in the catalog along the left-hand side of the
Cube window. These reports include:</p>
<ul>
<li>Highway vehicle miles traveled and vehicle hours traveled by facility type</li>
<li>Mode choice by purpose</li>
<li>Transit route-level boardings in Peak and Off-peak periods</li>
</ul>
<p>You can also make tabulations of any report. The video below has an example.</p>
<iframe src="https://www.youtube.com/embed/okU6pu0KAiQ" width="672" height="400px" data-external="1">
</iframe>
</div>
<div id="writing-custom-scripts" class="section level2" number="7.3">
<h2><span class="header-section-number">A.3</span> Writing Custom Scripts</h2>
<p>Sometimes what you would like to look at is not calculated directly from the
model, but you can write scripts that will compute what you need. Two common
script types are for matrix manipulation and for network manipulation.</p>
<div id="network-bandwidth" class="section level3" number="7.3.1">
<h3><span class="header-section-number">A.3.1</span> Network Bandwidth</h3>
<p>The script below will compute the difference between 2040 and 2012 highway
volumes. The script can be adapted for similar applications. The video
shows how to use this script and calculate what you need to.</p>
<iframe src="https://www.youtube.com/embed/BCSi0h7tbew" width="672" height="400px" data-external="1">
</iframe>
<pre><code>RUN PGM=NETWORK
NETI[1] = &quot;C:\projects\rvtpo-master\Base\Output\LOADED_2012A.net&quot;
NETI[2] = &quot;C:\projects\rvtpo-master\Base\EC_2040\Output\LOADED_2040A.net&quot;
NETO = &quot;C:\projects\rvtpo-master\Base\Output\Growth.net&quot; INCLUDE = base_vol, ec2040_vol, diff

PROCESS  PHASE=INPUT
;Use this phase to modify data as it is read, such as recoding node numbers.
ENDPROCESS

PROCESS  PHASE=NODEMERGE  
; Use this phase to make computations and selections of any data on the NODEI files.
ENDPROCESS


PROCESS  PHASE=LINKMERGE  
  ; Use this phase to make computations and selections of any data on the LINKI files.
  base_vol = li.1.TOTAL_VOL
  ec2040_vol = li.2.TOTAL_VOL
  diff = ec2040_vol - base_vol  
ENDPROCESS

PROCESS  PHASE=SUMMARY   
; Use this phase for combining and reporting of working variables.
ENDPROCESS

ENDRUN</code></pre>
</div>
</div>
<div id="network-and-zone-maps" class="section level2" number="7.4">
<h2><span class="header-section-number">A.4</span> Network and Zone Maps</h2>
<p>You can use Cube to create maps of network and zone data that you can use for
debugging and analysis. You can also include these graphics in reports and
presentations. For example, Figure <a href="app-demomodel.html#fig:network-factypes">A.3</a> shows the network
links by facility type. The video below shows how to do this.</p>
<div class="figure"><span style="display:block;" id="fig:network-factypes"></span>
<img src="images/00_facility_types.png" alt="Facility types in the Roanoke region." width="488" />
<p class="caption">
Figure A.3: Facility types in the Roanoke region.
</p>
</div>
<iframe src="https://www.youtube.com/embed/wvyhKXyZVbM" width="672" height="400px" data-external="1">
</iframe>
<div id="shortest-paths" class="section level3" number="7.4.1">
<h3><span class="header-section-number">A.4.1</span> Shortest Paths</h3>
<p>You can use Cube to measure the shortest path between two points in your model
network. You can also make isochrone maps of the travel time to various
destinations from a specific origin point, like the map shown in Figure <a href="app-demomodel.html#fig:isochrone">A.4</a>.
The video below shows how to do this.</p>
<div class="figure"><span style="display:block;" id="fig:isochrone"></span>
<img src="images/isochrone.png" alt="Isochrone map using network speed information." width="728" />
<p class="caption">
Figure A.4: Isochrone map using network speed information.
</p>
</div>
<iframe src="https://www.youtube.com/embed/24jRCNUIQOo" width="672" height="400px" data-external="1">
</iframe>
</div>
<div id="mode-choice-logsum-maps" class="section level3" number="7.4.2">
<h3><span class="header-section-number">A.4.2</span> Mode Choice Logsum Maps</h3>
<p>The mode choice model logsums are an important accessibility component in the model
that you may want to visualize. This video shows how to create these datasets
and visualize them.</p>
<iframe src="https://www.youtube.com/embed/KjsTnkU1h1Y" width="672" height="400px" data-external="1">
</iframe>
<p>The script is here:</p>
<pre><code>/*
  Average logsum calculator
  
  This script reads in a matrix (ideally a logsum) matrix and writes out the row averages.
*/
RUN PGM=MATRIX 
  
  ; Input matrix 1
  FILEI MATI[1] = &quot;C:\projects\rvtpo-master\Base\Output\HBW_MCLS.MAT&quot;
  ; Can add additional input matrices
  FILEI MATI[2] = &quot;C:\projects\rvtpo-master\Base\Output\HBO_MCLS.MAT&quot;
  
  ; Output DBF
  FILEO RECO[1] = &quot;C:\projects\rvtpo-master\Base\Output\average_mcls.dbf&quot;, 
        FIELDS= Z HBW HBO ; can add additional fields
  
  ; specify which working matrices are which purpose
  ; MW[n] = MI.[which mati].[which table]
  FILLMW MW[1] = MI.1.1 ; HBW  
  FILLMW MW[2] = MI.2.1 ; HBO
  ; can add additional fields
  
  
  ; The MATRIX program has an implicit row loop. So for each row, we restart the N and sum calculations
  n = 0
  hbw = 0
  hbo = 0
  
  ; loop through destinations
  LOOP JJ=1, ZONES
    hbw = hbw + MW[1][JJ]
    hbo = hbo + MW[2][JJ]
    ; add other fields
    n = n + 1 ; increment number of zones
  ENDLOOP
   
  ; write output record
  RO.Z = I
  RO.HBW = hbw / n
  RO.HBO = hbo / n
  ; other fields
  
  WRITE RECO = 1


ENDRUN</code></pre>
</div>
</div>
<div id="editing-transit-lines" class="section level2" number="7.5">
<h2><span class="header-section-number">A.5</span> Editing Transit Lines</h2>
<iframe src="https://www.youtube.com/embed/z0a268m_9TA" width="672" height="400px" data-external="1">
</iframe>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="9">
<li id="fn9"><p>It’s a small model with only about 250 zones; a larger model like WFRC
will take many hours. Generally model run time increases with the square of the
zones.<a href="app-demomodel.html#fnref9" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chap-process.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="app-rstudio.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["ceen565.pdf", "ceen565.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
